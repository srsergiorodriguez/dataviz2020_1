/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

//   {collection_name: "1960 - 1969", id_decada: "d1960", list: [], titulo: "", txt_intro: "", foto_seleccionad: "", foto_text: ""},

var arrayDecadas = [
    {
        list: [],
        years: [1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969],
        "collection_name": "1960 - 1969",
        "id_decada": "d1960",
        "titulo": "CRÓNICA ROJA, FOTOGRAFÍA DE PRENSA Y CROMOS POPULARES",
        "txt_intro": "En 1964 presentó por primera vez una exposición de su obra, inspirada en La Encajera de Jan Vermeer. En 1965 se presentarían dos versiones de Los suicidas del Sisga en el Salón Nacional de Artistas, iniciando lo que sería quizás uno de los rasgos más característicos de su obra, relacionada con la idiosincrasia colombiana, y con el contexto social, político y cultural que registraban los medios impresos.",
        "txt_analisis": "Los suicidas del Sisga, inaugura la participación de Beatriz González en el XVII Salón de Artistas Nacionales en 1965. La estética de la obra, en principio descalificada por el jurado por su falta de purismo en una tradición en la que el arte colombiano se inscribía en la limpieza técnica de las escuelas de arte francesas del siglo XVII, gana el segundo premio especial de pintura y funda un paradigma en adelante para el arte en Colombia. Y es precisamente en los años sesenta que, con la creación del Museo de Arte Moderno de Bogotá, comienza a impulsarse la consolidación de una identidad del arte colombiano que se basa en la temática como motor creativo y en la técnica como libre experimentación. \n\nLos suicidas del Sisga retrata a una pareja de personajes de un suceso local registrado en los periódicos: Antonio Martínez, jardinero de oficio de 25 años y Tulia Vargas, empleada doméstica, de 20, en una fotografía que anticipa el momento de su muerte. Al parecer Martínez convence a su novia de que, antes de sucumbir a los pecados del mundo es preferible morir. Se hacen una fotografía tipo boda en la tienda La Industria en Bogotá, en la que aparece la pareja con flores blancas y además escriben una carta sobre sus intenciones en un papel de luto. Unos días después saltan al vacío en la represa del Sisga. Lo que llama la atención de González no es solo el hecho mismo, sino el gusto por lo que allí se deja ver de la idiosincrasia y lo popular, registrado por los medios impresos. En particular, a finales de los sesenta, la artista recrea obras basadas en eventos trágicos que hacen referencia a una violencia en torno a los crímenes pasionales, suicidios, asesinatos de personajes anónimos, así como al morbo del relato de la crónica roja que permanece incluso en los títulos de las obras mismas. También aparecen otros sucesos de la vida social como los reinados y los eventos sociales.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/original/1eb5746e3a00146cc3a16fbc6172e83c.JPG",
        "foto_pie": "Recorte de la noticia \"Doble suicidio en \"El Sisga\". \nPeriódico El Tiempo, 1965. Archivo particular de Beatriz González."
    },
    {
        list: [],
        years: [1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979],
        "collection_name": "1970 - 1979",
        "id_decada": "d1970",
        "titulo": "TRANSICIÓN: LO COTIDIANO Y LO POLÍTICO",
        "txt_intro": "A lo largo de la década de 1970, Beatriz González fue integrando las tensiones políticas nacionales en su plástica. En ese sentido, dentro del espectro de la figuras de la cotidianidad, también fueron apareciendo figuras públicas reconocidas —tanto presentes como pasadas. No obstante, los retratos políticos cobrarían colores vibrantes y novedosos, para desempolvar realidades ocultas en los tradicionales tonos opacos.",
        "txt_analisis": "Durante los años setenta en la obra de Beatriz González se intensifica el uso de varios formatos. Un ejemplo de ello, es la intervención que hace en piezas de mobiliario que reflejan situaciones o personajes de la cultura local y universal. La relación entre obras se hace evidente; algunas veces la elaboración de la misma en diferentes formatos o simplemente en los cambios de tamaño según la temática elegida. Es una década en la que también hace interpretaciones de obras reconocidas y de artistas que serán sus grandes influenciadores, las copias son analizadas como representaciones de los medios, del contexto y de la cultura de la época. Es una década muy prolífica en su obra. A mediados de los 70 comienza a conectarse con la realidad nacional; situaciones cotidianas, violencia urbana y personajes de la política nacional son representados con un gran ingenio simbólico. Es posible vislumbrar cierta ironía frente a la violencia y a las circunstancias populares que se encuentran en los distintos estilos.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/original/e1b9c7575dce7bfe514a427caeefc1cf.jpg",
        "foto_pie": "Obra \"Disfrazado de motorista de la circulación, pero cubriendo el uniforme con una gabardina iba uno de los antisociales muertos ayer\", 1970."
    },
    {
        list: [],
        years: [1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989],
        "collection_name": "1980 - 1989",
        "id_decada": "d1980",
        "titulo": "MEMORIA HISTÓRICA",
        "txt_intro": "En esta década la artista muestra un profundo interés por lo nacional, por narrar la realidad colombiana apoyada en fotografías de prensa desde diversas técnicas como el lápiz, la serigrafía, el acrílico, entre otros, y distintos soportes como el papel y la tela. Al recontextualizar las imágenes mediáticas transforma su significado señalando posiciones de la prensa frente a hechos históricos. ",
        "txt_analisis": "Durante esta década la artista retrató una Colombia dividida entre la comedia y la tragedia. Comenzó retratando a la clase política colombiana con aguda ironía sobre su limitada visión de la identidad nacional. Luego de la toma del Palacio de Justicia ocurrida en Bogotá en 1985, su obra se enfocó de manera más profunda en el sufrimiento y marcó un énfasis en la violencia hacia la mujer. En los años 80 Beatriz González resignificó hechos políticos históricos en el país y hechos en espacios privados como la violencia intrafamiliar.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/original/2ad19cf40d6b1f9a9c35880aed9d63b3.jpg",
        "foto_pie": "Recorte de la noticia \"Condecoración del presidente de Ecuador por el presidente Julio César Turbay\"."
    },
    {
        list: [],
        years: [1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999],
        "collection_name": "1990 - 1999",
        "id_decada": "d1990",
        "titulo": "EL ROSTRO DE UNA DÉCADA DE VIOLENCIA",
        "txt_intro": "Esta década está marcada por un notable interés en el ambiente político nacional (la instalación de la Asamblea Nacional Constituyente), así como los hechos de violencia que ocurrieron durante esos años. El impacto del conflicto armado es visible en la mujer, cuyo protagonismo se revela en los bocetos y la obra de Las Delicias.",
        "txt_analisis": "El rostro de una mujer visiblemente entristecida es una de las imágenes recurrentes en las pinturas de Beatriz González en los años noventa, quien toma como referente recortes de prensa con fotografías que retratan el dolor de la ausencia, la impotencia y el impacto de la muerte en una sociedad dividida por años de violencia política. Los recortes dan cuenta de los hechos violentos ocasionados por el narcotráfico -en los primeros años de este periodo- y el conflicto armado que escaló a tal punto que se llegó a catalogar a Colombia como un Estado fallido. Entre los hitos que marcaron esta década está la instalación de la Asamblea Nacional Constituyente en 1991; hecho que dio paso a un nuevo pacto político y sentó -después de la Constitución de 1886- las bases del orden jurídico de un Estado social de derecho en un contexto de división y serios problemas de soberanía en algunas regiones que estaban bajo la injerencia de los grupos alzados en armas. El conflicto armado mostró tal agudeza durante estos años que puso a temblar la estabilidad institucional del país. Hechos como la toma a la base militar de Las Delicias en Puerto Leguizamón (Putumayo), en 1996, cuando unos 500 guerrilleros atacaron la base. Esta operación dejó a 27 militares muertos, 16 heridos y 60 secuestrados. Beatriz González tomó los registros de prensa de estos hechos y los llevó a retratos y bocetos como una poderosa manifestación desde las artes y un gran aporte a la memoria.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/original/3bb0619937d8ac9f49af748a61c060a1.jpg",
        "foto_pie": "Recorte de prensa con la imagen de María del Carmen Camacho."
    },
    {
        list: [],
        years: [2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009],
        "collection_name": "2000 - 2009",
        "id_decada": "d2000",
        "titulo": "EL ARTE NO TIENE VENCIMIENTO: MEMORIA DE LA VIOLENCIA EN COLOMBIA",
        "txt_intro": "Basada en la reportería gráfica, Beatriz González, genera una propuesta artística que narra acontecimientos de la historia de Colombia ocurridos durante la primera década del S XXI; continua con un ejercicio y una apuesta por conservar la memoria y rendir homenaje a los que no están. ",
        "txt_analisis": "El periodo comprendido entre el año 2000 y el 2009 refleja el compromiso social de la artista con hechos del pasado, recordando en diferentes obras la cadena de violencia causada por el conflicto interno, el narcotráfico y la corrupción política. Recrea también el recrudecimiento de la violencia en una época de masacres, despojos y desapariciones forzadas, reivindicando el papel de las victimas a través de representaciones simbólicas de las marcas del dolor, los sentimientos de pérdida y la angustia que se refleja en siluetas o rostros sin nombre. En la colección de la primera década del siglo XXI la figura femenina también está presente para evidenciar el papel de la mujer colombiana como víctima del conflicto armado, en contextos urbanos y rurales. Durante esta década la artista recurre a las series pictóricas para reflejar desarrollos temáticos en su obra, entre las cuales se destacan: Automascarilla, Verónica, Piedad, Cargueros y Auras anónimas. Ésta última hace parte de una serie pictórica que concluye con una instalación artística ubicada en los terrenos del Centro de Memoria Histórica ubicado en la ciudad de Bogotá. Se considera un recurso artístico que busca perpetuar la memoria histórica colombiana sobre los sucesos ocurridos el 9 de abril de 1948, el conocido Bogotazo que inicia luego del asesinato del líder Jorge Eliecer Gaitán. Dicho evento causó una serie de manifestaciones durante tres días consecutivos, dejó alrededor de 3000 muertes en el país y dio comienzo a la llamada época de la Violencia que luego desencadenaría en el surgimiento de los grupos armados FARC y ELN.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/original/3d3b78d91b11149200c107ba9369a17b.jpg",
        "foto_pie": "Recorte de la noticia \"Encuentran fosas comunes\"."
    },
    {
        list: [],
        years: [2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],
        "collection_name": "2010 - 2019",
        "id_decada": "d2010",
        "titulo": "RETROSPECTIVA: MEMORIA HISTÓRICA Y DUELO EN LO PLÁSTICO",
        "txt_intro": "Desde finales de la década del 2000, los aires por reconstruir la memoria y el pasado de la violencia del siglo XX colombiano fueron retratados por Beatriz González. Esta mirada se fue enfocando en el dolor y la muerte como fundamentos para su representación visual de la coyuntura política y social que vivió Colombia. ",
        "txt_analisis": "La segunda década del siglo XXI ha representado para Beatriz González una mirada atrás a todo su trabajo plástico y comunicativo desde la década de 1960. Por este motivo, la retrospectiva juega un doble papel para la artista: por un lado, la representación de su contexto nacional inmediato y, por el otro, la exploración de distintas técnicas de representación visual para conjugar su mirada de un periodo histórico convulsionado de procesos y acontecimientos marcados por la percepción y representación de la muerte y lo popular. Las situaciones políticas y sociales, marcadas por la violencia, son un escenario recurrente en nuestro contexto nacional inmediato. En este orden, la década de 2010 se caracterizó por los esfuerzos institucionales y sociales por restituir la voz de las víctimas del conflicto armado. Esta exploración investigativa, desde diversos ámbitos de la sociedad colombiana —como el Centro Nacional de Memoria Histórica, en el 2012, y las negociaciones con el grupo insurgente FARC—, dieron como resultado la identificación de sujetos y comunidades específicas que sufrieron de estas actividades violentas. Las mujeres, los niños y diversas comunidades étnicas pudieron ser visibles en este teatro de la guerra. La propuesta visual y comunicativa que exploró Beatriz González fue un diálogo por la transformación de estas situaciones —en contextos de violencia o calamidad— en íconos. Uno de los contrastes más significativos, en relación con décadas pasadas, es que los protagonistas de sus obras pierden sus cualidades individuales. En el 2010 no se encuentran personajes reconocidos o rostros claros; las siluetas toman el papel central en la comunicación de la violencia. En ese sentido, Beatriz González sugiere la emergencia de un singular colectivo: una plástica que logra comunicar la impresión y el desgarro de las consecuencias de la guerra en cuerpos humanos. La sustracción del rostro y la emergencia de la silueta es su postura por acercarnos a esta violencia, a la cual ningún colombiano es ajeno. Los tonos oscuros acompañan estas figuras humanas, sugiriendo la tensión del duelo, el olvido, la nostalgia y el —polémico e indescifrable— perdón.",
        "foto_seleccionada": "https://bga.uniandes.edu.co/catalogo/files/fullsize/4d1fc6469c19cc80b73ccdccf9655a50.jpg",
        "foto_pie": "Obra \"Estudio de Zócalo del duelo\", 2019."
    }
];


init();
function init() {
    loadFont("AdelleSansBold", "adllbold");
    loadFont("AdelleSansBoldItalic", "adllbolditalic");
    loadFont("AdelleSansBook", "adllbook");
    loadFont("AdelleSansBookItalic", "adllbookitalic");
    loadFont("AdelleSansExtrabold", "adllblack");
    loadFont("AdelleSansExtraboldItalic", "adllblackitalic");
    loadFont("AdelleSansHeavy", "adllheavy");
    loadFont("AdelleSansHeavyItalic", "adllheavyitalic");
    loadFont("AdelleSansLight", "adlllight");
    loadFont("AdelleSansLightItalic", "adlllightitalic");
    loadFont("AdelleSansSemibold", "adllsemibold");
    loadFont("AdelleSansSemiboldItalic", "adllsemibolditalic");
    loadFont("AdelleSansThin", "adllthin");
    loadFont("AdelleSansThinItalic", "adllthinitalic");
    startGallery();
}

function loadFont(name, family) {
    var newStyle = document.createElement('style');
    newStyle.appendChild(document.createTextNode("\
    @font-face {\
        font-family: " + family + ";\
        src: url(" + urlcanonical + '/fonts/' + name + '.otf)' + ";\
    }\
    "));
    document.head.appendChild(newStyle);
}





function startGallery() {
    /*
     $("#nanogallery").nanogallery2({
     
     itemsBaseURL: pathIMG,
     items: [
     {src: '1.jpg', srct: '1_t.jpg', title: 'Berlin 1'},
     {src: '2.jpg', srct: '2_t.jpg', title: 'Berlin 2'},
     {src: '3.jpg', srct: '3_t.jpg', title: 'Berlin 3'},
     {src: '4.jpg', srct: '4_t.jpg', title: 'Berlin 4'}
     
     ]
     });*/

    var $grid = $('.grid').masonry({
        itemSelector: '.grid-item',
        percentPosition: true,
        columnWidth: '.grid-sizer'
    });
}




function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}


function initColors(idTmp, dataTmp) {

    let str = "";
    for (var obraTmp in dataTmp) {
        let r = dataTmp[obraTmp]["color"][0];
        let g = dataTmp[obraTmp]["color"][1];
        let b = dataTmp[obraTmp]["color"][2];
        if (!!r && !!g && !!b) {
            str += "" + "rgb(" + r + "," + g + "," + b + ")" + ",";
        } else {
            str += "" + "rgb(" + 0 + "," + 0 + "," + 0 + ")" + ",";
        }
    }

    str = str.substring(0, str.length - 1);
    str = "linear-gradient(to left," + str + ")";
    $("#" + idTmp).css("background", str);
    //console.log($("#" + idTmp) + " - " + str);
}


$(window).on('load', function () {
    loadData();
});
function loadData() {


    // Sort lista de obras
    for (var obra in databg) {
        for (var decada in arrayDecadas) {

            if (arrayDecadas[decada]["collection_name"] === databg[obra]["collection_name"]) {
                arrayDecadas[decada]["list"].push(databg[obra]);
                continue;
            }
        }
    }

// 1. color decada
    for (var decada in arrayDecadas) {
        initColors(arrayDecadas[decada]["id_decada"], arrayDecadas[decada]["list"]);

        $("#label-" + arrayDecadas[decada]["id_decada"]).text(arrayDecadas[decada]["collection_name"] + " - ÉPOCA EN COLORES");
        $("#" + arrayDecadas[decada]["id_decada"] + "-titulo").text(arrayDecadas[decada]["titulo"]);
        $("#" + arrayDecadas[decada]["id_decada"] + "-txt_analisis").text(arrayDecadas[decada]["txt_analisis"]);

        $("#" + arrayDecadas[decada]["id_decada"] + "-foto_seleccionada").attr("src", arrayDecadas[decada]["foto_seleccionada"]);

        $("#" + arrayDecadas[decada]["id_decada"] + "-foto_texto").text(arrayDecadas[decada]["foto_pie"]);




        //2. agrega obra en galeria en lista
        for (var tmpObra in arrayDecadas[decada]["list"]) {

            let decadaObra = arrayDecadas[decada]["list"][tmpObra];

            var divGridItem = $('<div id="gi-' + decadaObra["ID"] + '">').addClass("grid-item");
            divGridItem.appendTo('#g-' + arrayDecadas[decada]["id_decada"]);

            var img = $('<img id="i-' + decadaObra["ID"] + '">'); //Equivalent: $(document.createElement('img'))
            img.attr('src', decadaObra["photo_small"]);
            img.appendTo('#gi-' + decadaObra["ID"]);

            var divPalette = $('<div id="p-' + decadaObra["ID"] + '">').addClass("palette");
            divPalette.appendTo('#gi-' + decadaObra["ID"]);

            // Carga paleta de colores
            for (var color in decadaObra["palette"]) {
                var divIPalette = $('<div id="p-' + decadaObra["ID"] + '-' + color + '">').addClass("color-palette");
                divIPalette.appendTo('#p-' + decadaObra["ID"]).css('background', "rgb(" + getRandomColorUnique(decadaObra["palette"][color][0]) + "," + decadaObra["palette"][color][1] + "," + decadaObra["palette"][color][2] + ")");
            }


            // Carga obras en la línea del tiempo

            // Carga en el catalogo main
            let divGridItemB = $('<div>').addClass("grid-item-2").addClass("main-galery");
            let imgA = $('<img >');
            imgA.attr('src', decadaObra["photo_small"]).addClass("galery-foto");

            $("#main-gallery").append(divGridItemB.append(imgA));
        }
    }

    // 3. Agrega los hechos definidos





    setTimeout(function () {
        $('.grid').masonry({
            // set itemSelector so .grid-sizer is not used in layout
            itemSelector: '.grid-item',
            // use element for option
            columnWidth: '.grid-sizer',
            percentPosition: true
        });

        $('.grid-2').masonry({
            // set itemSelector so .grid-sizer is not used in layout
            itemSelector: '.grid-item-2',
            // use element for option
            columnWidth: '.grid-sizer-2',
            percentPosition: true
        });
        //loadHechos();
        createLine();
        triggerOrder();
    }
    , 8000);

}


function loadHechos() {

    for (var tmpHecho in arrayHechos) {
        // {collection_name: "1960 - 1969", id_decada: "d1960", nombre: "Algo 1", ano: "1962", ID: "H1"},
        if ($("#l-" + arrayHechos[tmpHecho]["id_decada"]).length) {
            // it exists


            let ano = arrayHechos[tmpHecho]["ano"];
            let h = $("#l-" + arrayHechos[tmpHecho]["id_decada"]).height();
            h = $(".col-sm-1").height() - $(".st").height();

            //console.log("Año:" + ano + " h:" + h);

            var divContent = $('<div id="c-' + arrayHechos[tmpHecho]["id"] + '">').addClass("linea-hecho-contenedor");
            divContent.css("height", "30px");
            divContent.appendTo($("#l-" + arrayHechos[tmpHecho]["id_decada"]));

            var divHecho = $('<div id="h-' + arrayHechos[tmpHecho]["id"] + '">').addClass("linea-hecho");
            //divHecho.appendTo($("c-" + arrayHechos[tmpHecho]["ID"]));
            divContent.append(divHecho);

            var pHecho = $('<p>').addClass("txt-normal-3 linea-txt");
            pHecho.text(arrayHechos[tmpHecho]["nombre"]);
            //pHecho.appendTo($("c-" + arrayHechos[tmpHecho]["ID"]));
            divContent.append(pHecho);

            var pHechoAno = $('<p>').addClass("txt-normal-linea linea-txt-right");
            pHechoAno.text(arrayHechos[tmpHecho]["ano"]);
            //pHechoAno.appendTo($("c-" + arrayHechos[tmpHecho]["ID"]));
            divContent.append(pHechoAno);

            //Ubicaión del p
            let annn = "" + parseInt(arrayHechos[tmpHecho]["ano"]);

            ano = annn.substring(3, annn.length);

            let hh = 0;

            if (isNaN(hh) || isNaN(hh)) {
                hh = -77;
            } else {
                hh = (+ano * +h / 10);
            }

            let num = $("#l-" + arrayHechos[tmpHecho]["id_decada"] + " .linea-hecho-contenedor").length;
            hh = hh - 50 - num * 20;

            //divContent.css('translate', "calc(" + hh + "px - 16vh )" );
            divContent.css('-webkit-transform', "translateY(" + hh + "px)");

            //console.log("End Año:" + ano + " h:" + h + " hh:" + hh + " num:" + num);

        }
    }


    for (var tmpObra in arrayDecadas) {

        arrayDecadas[tmpObra]["date"];
    }

}


function  getRandomColorUnique(color) {
    let colorEnd;
    if (!!color) {
        colorEnd = color;
    } else {
        colorEnd = 0;
    }

    return colorEnd;
}


// filtros btn
// filtros hechos
// filtro por obras
function filtro(tmpIdDecada, filtro) {

    // Violencias
    $("#" + tmpIdDecada + " .flt").show();

    for (var tmpObra in arrayDecadas) {
        // todo get
        if (filtro === "filtro_1") {
        }
        if (getIDByCollection(tmpIdDecada) == arrayDecadas[tmpObra]["collection_name"]
                && arrayDecadas[tmpObra]["violencias"] == filtro) {
            $("#i-" + decadas["ID"]).addClass("flt").hide();
        }
    }

}


function clickSeleccion(idOrigen) {
    console.log(idOrigen);
    let origen = idOrigen.split("-");

    $(".obra-seleccionada").removeClass("obra-seleccionada");
    $(".hecho-seleccionado").removeClass("hecho-seleccionado");

    //1. Caso obras
    if (origen[0] == "o") {
        $("#o-" + origen[1]).addClass("obra-seleccionada").css("border-color", "#ffc107");
        $("#gi-" + origen[1]).addClass("obra-seleccionada").css("border-color", "#ffc107");
    } else if (origen[0] == "h") {

        $("#" + origen[0] + "-" + origen[1]).addClass("hecho-seleccionado");

        for (var tmpDecada in arrayDecadas) {
            let decada = arrayDecadas[tmpDecada];

            for (var tmpObra in decada["list"]) {
                let obra = decada["list"][tmpObra];

                if (obra[origen[1]] == true) {
                    $("#gi-" + obra["ID"]).addClass("obra-seleccionada").css("border-color", "red");
                }

            }

        }

    }


    triggerOrder();

}

//onclick="selectFiltro('violencia','intrafamiliar','d1960')"
function selectFiltro(tipo, filtro, idDecada) {

    $(".to-hide").show().removeClass("to-hide");

    if (tipo == "violencia") {


        for (var tmpDecada in arrayDecadas) {
            let decada = arrayDecadas[tmpDecada];

            if (decada["id_decada"] == idDecada) {

                for (var tmpObra in decada["list"]) {
                    let obra = decada["list"][tmpObra];

                    console.log(obra["ID"] + " - " + obra["violencias"]);
                    if (obra["violencias"] != filtro) {
                        $("#gi-" + obra["ID"]).addClass("to-hide");
                        console.log(obra["ID"] + " - Hide");
                    }

                    if (obra["violencias"] === filtro) {
                        $("#gi-" + obra["ID"]).show().removeClass("to-hide");
                        console.log(obra["ID"] + " - show");
                    }
                }
            }
        }

        $(".to-hide").hide();
    } else if (tipo == "protagonista") {

        for (var tmpDecada in arrayDecadas) {
            let decada = arrayDecadas[tmpDecada];

            if (decada["id_decada"] == idDecada) {

                for (var tmpObra in decada["list"]) {
                    let obra = decada["list"][tmpObra];

                    if (obra["mujeres"] != true) {
                        $("#gi-" + obra["ID"]).addClass("to-hide");
                    }
                }
            }
        }

        $(".to-hide").hide();
    } else if (tipo == "limpiar") {
        $(".obra-seleccionada").removeClass("obra-seleccionada");
        $(".hecho-seleccionado").removeClass("hecho-seleccionado");

    }

    triggerOrder();

}



function getIDByCollection(idDecada) {

    for (var tmp in arrayDecadas) {
        if (idDecada == arrayDecadas[tmp]["id_decada"]) {
            return arrayDecadas[tmp]["collection_name"]
        }
    }
}


function createLine() {

    let yearSe = false;

    for (var tmpDecada in arrayDecadas) {
        let decada = arrayDecadas[tmpDecada];

        // Nivel 2. 
        for (var tmpYear in decada["years"]) {
            let year = decada["years"][tmpYear];

            var divRow = $('<div id="y-' + year + '">').addClass("linea-row-year").addClass("row");
            //divContent.css("height", "30px");
            divRow.appendTo($("#l-" + decada["id_decada"]));

            let divCol1 = $('<div id="c-' + year + '-1">').addClass("col-sm-1");
            let divCol2 = $('<div id="c-' + year + '-2">').addClass("col-sm-1").addClass("linea-fondo");
            let divCol3 = $('<div id="c-' + year + '-3">').addClass("col-sm-10");

            var pYear = $('<p>').addClass("txt-normal-3");
            pYear.text(year);
            pYear.appendTo(divCol1);

            divRow.append(divCol1);
            divRow.append(divCol2);
            divRow.append(divCol3);
        }
    }


    for (var tmpDecada in arrayDecadas) {
        let decada = arrayDecadas[tmpDecada];

        // Nivel 2. 
        for (var tmpYear in decada["years"]) {
            let year = decada["years"][tmpYear];

            // 3A. Hechos
            for (var tmpHecho in arrayHechos) {
                let hecho = arrayHechos[tmpHecho];

                if (hecho["ano"] == year) {

                    var divHecho = $('<div id="h-' + hecho["id"] + '">').addClass("linea-hecho");
                    $("#c-" + year + "-2").append(divHecho);

                    divHecho.click(function () {
                        clickSeleccion("h-" + hecho["id"]);
                    });

                    var pHecho = $('<p>').addClass("txt-normal-4");
                    pHecho.text(hecho["nombre"]);
                    $("#c-" + year + "-3").append(pHecho);
                }
            }

            // 3AB. Obras
            for (var tmpObra in decada["list"]) {
                let obra = decada["list"][tmpObra];

                //console.log(obra["date"]);
                if (obra["date"] == year) {
                    var divObra = $('<div id="o-' + obra["ID"] + '">').addClass("linea-obra");

                    divObra.click(function () {
                        clickSeleccion("o-" + obra["ID"]);
                    });
                    $("#c-" + year + "-2").append(divObra);

                    //o
                    //gi
                    arrayDecadas[tmpDecada]["list"][tmpObra]["o"] = "o-" + obra["ID"];
                    arrayDecadas[tmpDecada]["list"][tmpObra]["gi"] = "gi-" + obra["ID"];

                    //console.log(arrayDecadas[tmpDecada]["list"][tmpObra]["gi"] + " " + arrayDecadas[tmpDecada]["list"][tmpObra]["o"])


                    var pHecho = $('<p>').addClass("txt-normal-3");
                    pHecho.text(truncate(obra["title"], 15));
                    $("#c-" + year + "-3").append(truncate(pHecho));

                }
            }

        }

        /*
         for (var tmpObra in decada["list"]) {
         let obra = decada["list"][tmpObra];
         
         
         }*/

    }

}



function truncate(str, n) {
    return (str.length > n) ? str.substr(0, n - 1) + '...' : str;
}
;


function triggerOrder() {
    setInterval(function () {
        $('.grid').masonry({
            // set itemSelector so .grid-sizer is not used in layout
            itemSelector: '.grid-item',
            // use element for option
            columnWidth: '.grid-sizer',
            percentPosition: true
        });

        $('.grid-2').masonry({
            // set itemSelector so .grid-sizer is not used in layout
            itemSelector: '.grid-item-2',
            // use element for option
            columnWidth: '.grid-sizer-2',
            percentPosition: true
        });
        //loadHechos();
    }
    , 4000);
}